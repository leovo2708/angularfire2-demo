<div class="container">
  <h1>Product List</h1>
  <form>
    <div class="form-group row">
      <label for="productName" class="col-2 col-form-label">Product name</label>
      <div class="col-10">
        <input type="text" class="form-control" id="productName" [(ngModel)]="productName" name="productName" />
      </div>
    </div>
    <div class="form-group row">
      <label for="productPrice" class="col-2 col-form-label">Product price</label>
      <div class="col-10">
        <input type="number" class="form-control" id="productPrice" [(ngModel)]="productPrice" name="productPrice" />
      </div>
    </div>
    <div class="form-group">
      <button (click)="add()">Add</button>
    </div>
  </form>
  <hr>
  <div class="form-group">
    <input type="text" class="form-control" [(ngModel)]="filterText" placeholder="Input here to filter" (ngModelChange)="filter()" />
  </div>
  <table class="table">
    <thead class="thead-default">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Price</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let product of products | async; let i = index">
        <th>{{i+1}}</th>
        <td [ngSwitch]="isEditing && product.$key === editingKey">
          <input *ngSwitchCase="true" type="text" class="form-control" [(ngModel)]="product.name" />
          <div *ngSwitchCase="false">{{product.name}}</div>
        </td>
        <td [ngSwitch]="isEditing && product.$key === editingKey">
          <input *ngSwitchCase="true" type="number" class="form-control" [(ngModel)]="product.price" />
          <div *ngSwitchCase="false">{{product.price}}</div>
        </td>
        <td [ngSwitch]="isEditing && product.$key === editingKey">
          <div *ngSwitchCase="true">
            <button type="button" class="btn btn-secondary" (click)="save()">
              <i class="fa fa-check" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary" (click)="stopEditing()">
              <i class="fa fa-ban" aria-hidden="true"></i>
            </button>
          </div>
          <div *ngSwitchCase="false">
            <button type="button" class="btn btn-secondary" (click)="update(product.$key, product)">
              <i class="fa fa-pencil" aria-hidden="true"></i>
            </button>
            <button type="button" class="btn btn-secondary" (click)="delete(product.$key)">
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <button type="button" class="btn btn-secondary" (click)="deleteAll()">
    <i class="fa fa-trash" aria-hidden="true"></i> Delete All
  </button>
</div>